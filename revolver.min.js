/*! revolverjs 2013-05-14 */
(function(){"use strict";var t=function(t,i){return this.currentSlide=0,this.nextSlide=0,this.numSlides=0,this.lastSlide=0,this.slides=[],this.iteration=0,this.intervalId=null,this.disabled=!1,this.options=_.merge({},this.defaults,i),_.each(t,this.addSlide,this),this.previousSlide=this.lastSlide,this.status={paused:!1,playing:!1,stopped:!0},this.isAnimating=!1,1>=this.numSlides?(this.disabled=!0,void 0):(this.on("transitionComplete",function(){this.isAnimating=!1}),this.on("play",this.options.onPlay),this.on("stop",this.options.onStop),this.on("pause",this.options.onPause),this.on("restart",this.options.onRestart),this.on("transitionStart",this.options.transition.onStart),this.on("transitionComplete",this.options.transition.onComplete),_.bind(this.options.onReady,this)(),this.options.autoPlay&&this.play({},!0),this)};t.prototype.defaults={autoPlay:!0,onReady:function(){},onPlay:function(){},onStop:function(){},onPause:function(){},onRestart:function(){},rotationSpeed:4e3,transition:{onStart:function(){},onComplete:function(){},name:"none"}},t.prototype.VERSION="2.0",t.prototype.addSlide=function(t){this.slides.push(t),this.numSlides=this.slides.length,this.lastSlide=0===this.numSlides?0:this.numSlides-1;var i=this.currentSlide+1;this.nextSlide=i>this.lastSlide?0:i},t.prototype.changeStatus=function(t){return _.each(this.status,function(i){this.status[i]=i===t},this),this},t.prototype.transition=function(t){if(this.disabled===!1&&this.isAnimating===!1){t=_.merge({},this.options.transition,t);var i=_.bind(this.transitions[t.name],this);this.isAnimating=!0,i(t),this.currentSlide=this.nextSlide,this.previousSlide=0===this.currentSlide?this.lastSlide:this.currentSlide-1,this.nextSlide=this.currentSlide===this.lastSlide?0:this.currentSlide+1,this.iteration++,this.trigger("transitionStart")}return this},t.prototype.transitions={},t.prototype.transitions.none=function(){this.slides[this.currentSlide].setAttribute("style","display: none"),this.slides[this.nextSlide].setAttribute("style","display: block"),this.trigger("transitionComplete")},t.prototype.play=function(t,i){return this.disabled!==!1||this.status.playing||(this.changeStatus("playing"),this.trigger("play"),i||this.transition(t),this.intervalId=setInterval(_.bind(this.transition,this),parseFloat(this.options.rotationSpeed))),this},t.prototype.pause=function(){return this.disabled!==!1||this.status.paused||(this.changeStatus("paused"),this.trigger("pause"),null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)),this},t.prototype.stop=function(){return this.disabled!==!1||this.status.stopped||(this.changeStatus("stopped"),this.trigger("stop"),null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)),this.reset()},t.prototype.reset=function(){return 0!==this.currentSlide&&(this.nextSlide=0),this},t.prototype.restart=function(t){return this.disabled===!0?this:(this.trigger("restart"),this.stop().play(t))},t.prototype.first=function(t){return this.goTo(0,t)},t.prototype.previous=function(t){return this.goTo(this.previousSlide,t)},t.prototype.goTo=function(t,i){return t=parseInt(t),this.disabled===!0||t===this.currentSlide?this:(this.nextSlide=t,this.status.playing?this.pause().play(i):this.transition(i))},t.prototype.next=function(t){return this.goTo(this.nextSlide,t)},t.prototype.last=function(t){return this.goTo(this.lastSlide,t)},t.prototype.on=function(t,i){return bean.on(this,t,_.bind(i,this))},t.prototype.one=function(t,i){return bean.one(this,t,_.bind(i,this))},t.prototype.off=function(t,i){return bean.off(this,t,_.bind(i,this))},t.prototype.trigger=function(t){return bean.fire(this,t)},window.Revolver=t})();